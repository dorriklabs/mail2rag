{% extends "base.html" %}
{% block content %}
<div
    style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #ffc107;">
    <h3 style="margin: 0 0 10px 0; color: #856404;">
        ğŸ” Suggestion partielle (confiance: {{ confidence_percent }}%) - Ã€ complÃ©ter
    </h3>
    <p style="margin: 0; color: #856404;">
        La base de connaissances contient des informations partiellement pertinentes.
    </p>
</div>

<div style="margin-bottom: 20px; padding: 15px; background: #ffffff; border: 1px solid #dee2e6; border-radius: 8px;">
    {{ ai_response | safe }}
</div>

<hr style="border: 1px dashed #dee2e6; margin: 20px 0;">

<div style="background: #e9ecef; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
    <h4 style="margin: 0 0 10px 0; color: #495057;">ğŸ“š Sources trouvÃ©es (Ã  supprimer avant envoi) :</h4>
    <ul style="margin: 0; padding-left: 20px; color: #6c757d;">
        {% for source in sources %}
        <li>{{ source.filename }} <span style="color: #adb5bd;">(pertinence: {{ source.score_percent }}%)</span></li>
        {% endfor %}
    </ul>
</div>

<details style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
    <summary style="cursor: pointer; font-weight: bold; color: #495057;">ğŸ“© Question originale (cliquer pour afficher)
    </summary>
    <div style="margin-top: 10px;">
        <p style="margin: 5px 0;"><strong>De :</strong> {{ client_email }}</p>
        <p style="margin: 5px 0;"><strong>Sujet :</strong> {{ original_subject }}</p>
        <blockquote style="border-left: 3px solid #007bff; padding-left: 15px; margin: 10px 0 0 0; color: #495057;">
            {{ original_question | replace('\n', '<br>') | safe }}
        </blockquote>
    </div>
</details>
{% endblock %}